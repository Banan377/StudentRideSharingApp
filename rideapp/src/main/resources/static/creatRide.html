<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <title>Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø­Ù„Ø©</title>

  <link rel="stylesheet" href="driver.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


  <style>
    .container-form {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #f9fbfb;
      padding-top: 20px;
      width: 100%;
    }

    .form-box {
      background: #ffffff;
      padding: 35px 45px;
      border-radius: 12px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 520px;
      text-align: center;
    }

    .form-box h2 {
      margin-bottom: 20px;
      color: #265262;
      font-size: 20pt;
      font-weight: bold;
    }

    .form-box label {
      display: block;
      margin-bottom: 5px;
      text-align: right;
      color: #333;
      font-weight: 100;
    }

    .form-box input,
    .form-box select {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }

    input[type="date"],
    input[type="number"] {
      direction: ltr !important;
      text-align: right;
    }

    .row {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .row .field {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    iframe {
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      height: 150px;
    }

    button {
      width: 100%;
      background: #487788;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }

    button:hover {
      background: #265262;
    }
  </style>
</head>

<body>
  <div class="sidebar">
    <div class="logo"></div>
    <ul class="menue">
      <li>
        <a href="driverUI.html"><i class="fas fa-home"></i><span>Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
      </li>
      <li>
        <a href="driverRiedsHistory.html"><i class="fas fa-history"></i><span>Ø³Ø¬Ù„ Ø§Ù„Ø±Ø­Ù„Ø§Øª</span></a>
      </li>
      <li>
        <a href="#"><i class="fas fa-bell"></i><span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span></a>
      </li>
      <li>
        <a href="driverEvents.html"><i class="fas fa-school"></i><span>Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</span></a>
      </li>
    </ul>
  </div>

  <div class="main-content">
    <div class="container-form">
      <div class="form-box">
        <form>
          <h2>Ø§Ù…Ù„Ø£ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø­Ù„Ø©</h2>

          <div class="row">
            <div class="field">
              <label>Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚</label>
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3623.9023029394794!2d46.675295215002004!3d24.71355158411983!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e2f0fa3bca3b6f1%3A0x5e86d6c5a2d88b1b!2sRiyadh!5e0!3m2!1sar!2ssa!4v1698856484476!5m2!1sar!2ssa"
                allowfullscreen="" loading="lazy"></iframe>
            </div>

            <div class="field">
              <label>Ø§Ù„ÙˆØ¬Ù‡Ø©</label>
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3620.5901550334483!2d46.71263111499533!3d24.782277084085617!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3e2ef1a51b8c9a4d%3A0x72f19e5d64efc1b1!2sKing%20Saud%20University!5e0!3m2!1sar!2ssa!4v1698856501543!5m2!1sar!2ssa"
                allowfullscreen="" loading="lazy"></iframe>
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±Ø­Ù„Ø©</label>
           <input type="date" id="rideDate" name="date" required>
            </div>
            <div class="field">
              <label for="seats">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯</label>
<input type="number" id="seats" name="seats" min="1" max="6" required>
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label for="gender">ØªÙØ¶ÙŠÙ„ Ø§Ù„Ø¬Ù†Ø³</label>
              <select id="gender" name="gender">
  <option value="any">Ø§Ù„ÙƒÙ„</option>
  <option value="male">Ø°ÙƒÙˆØ± ÙÙ‚Ø·</option>
  <option value="female">Ø¥Ù†Ø§Ø« ÙÙ‚Ø·</option>
</select>
            </div>

            <div class="field">
              <label for="time">ÙˆÙ‚Øª Ø§Ù„Ø±Ø­Ù„Ø©</label>
<input type="time" id="rideTime" name="time" required>            </div>
          </div>


<button type="button" onclick="submitRide()">Ù†Ø´Ø±</button>
        </form>
      </div>
    </div>
  </div>
  <script>
  function submitRide() {
    const ride = {
  destination: "King Saud University",
  date: document.getElementById("rideDate").value,
  time: document.getElementById("rideTime").value,
  seatsAvailable: document.getElementById("seats").value,
  genderPreference: document.getElementById("gender").value,
  status: "ACTIVE",
  currentLocation: "Riyadh",
  distance: 0.0,
  driverEmail: localStorage.getItem("userEmail")   // ğŸ”¥ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹
};


 fetch(`http://localhost:8083/api/rides/createRide?driverEmail=${encodeURIComponent(localStorage.getItem("userEmail"))}`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(ride)
})

    .then(response => {
      if (response.ok) {
        alert(" ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø­Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!");
console.log("Ø¨ÙŠØ­ÙˆÙ„ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©...");
window.location.href = "driverUI.html";
      } else {
        alert(" ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©.");
      }
    })
    .catch(error => {
      console.error("Error:", error);
      alert(" Ø­Ø¯Ø« Ø®Ø·Ø£.");
    });
  }
</script>

</body>

</html>