<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <title>واجهة السائق</title>
  <link rel="stylesheet" href="driver.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

  <!-- القائمة الجانبية -->
  <div class="sidebar">
    <div class="logo"></div>
    <ul class="menue">
      <li><a href="driverUI.html"><i class="fas fa-home"></i><span>الصفحة الرئيسية</span></a></li>
      <li><a href="#"><i class="fas fa-history"></i><span>سجل الرحلات</span></a></li>
      <li><a href="#"><i class="fas fa-bell"></i><span>الإشعارات</span></a></li>
      <li><a href="#"><i class="fas fa-school"></i><span>أنشطة الجامعة</span></a></li>
    </ul>
  </div>

  <!-- المحتوى الرئيسي -->
  <div class="main-content">
    <!-- شريط أعلى الصفحة (زر إنشاء رحلة + البروفايل) -->
    <div class="top-bar">
      <button type="button" class="create-btn" onclick="window.location.href='creatRide.html'">
        إنشاء رحلة
      </button>

      <div style="display: flex; align-items: center; gap: 15px;">
        <!-- زر التبديل بين الأدوار -->
        <button class="switch-role-btn" onclick="switchRole()">تبديل إلى راكب</button>

        <!-- الملف الشخصي -->
        <div class="profile-section">
          <button onclick="toggleProfileDropdown()" class="profile-btn">
            <i class="fas fa-user-circle"></i>
          </button>

          <!-- قائمة البروفايل المنسدلة -->
          <div id="profile-dropdown" class="dropdown-menu hidden">
            <ul>
              <li><a href="#" onclick="showRatingPage()"><i class="fas fa-star"></i><span>سجل التقييمات</span></a></li>
              <li><a href="#" onclick="showSettingsPage()"><i class="fas fa-cog"></i><span>الإعدادات</span></a></li>
              <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i><span>تسجيل الخروج</span></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- منطقة المحتوى (الإحصائيات + كارد الرحلة والركاب) -->
    <div class="content-area">
      <!-- الإحصائيات -->
      <div class="stats-card">
        <div class="stat-box">
          <p>الطلبات الجديدة</p><span id="new-requests">2</span>
        </div>
        <div class="stat-box">
          <p>المقبولة</p><span id="accepted">0</span>
        </div>
        <div class="stat-box">
          <p>المرفوضة</p><span id="rejected">0</span>
        </div>
        <div class="stat-box">
          <p>المقاعد المتاحة</p><span id="seats-left">1/3</span>
        </div>
      </div>

      <!-- حاوية الكاردات -->
      <div class="trips-container">

        <!-- الكارد الرئيسي للرحلة 1 -->
        <div class="trip-card">
          <!-- أعلى الكارد: معلومات الرحلة الرئيسية -->
          <div class="trip-header">
            <div class="trip-header-text">
              <h3 class="trip-title">رحلة إلى الجامعة</h3>
              <p class="trip-subtitle">تفاصيل الرحلة الحالية</p>
            </div>
            <div class="trip-seats-box">
              <span class="trip-seats-label">المقاعد المتبقية</span>
              <span class="trip-seats-value">1/3</span>
            </div>
          </div>

          <!-- بيانات الرحلة (تاريخ، وقت، موقع انطلاق) -->
          <div class="trip-meta">
            <div class="trip-meta-item">
              <span class="trip-meta-label">تاريخ الرحلة</span>
              <span class="trip-meta-value">2025-11-21</span>
            </div>
            <div class="trip-meta-item">
              <span class="trip-meta-label">وقت الرحلة</span>
              <span class="trip-meta-value">4:30 مساءً</span>
            </div>
            <div class="trip-meta-item">
              <span class="trip-meta-label">موقع الانطلاق</span>
              <span class="trip-meta-value">حي الياسمين</span>
            </div>
          </div>

          <!-- طلبات الركاب داخل الكارد الرئيسي -->
          <div class="passengers-list">
            <!-- طلب راكب 1 -->
            <div class="passenger-card booking-request"
              onclick="openPassengerInfo('أحمد محمد','حي الياسمين','جامعة الملك سعود','4:30 مساءً')">
              <div class="passenger-info">
                <p class="passenger-name">أحمد محمد</p>
                <p class="passenger-location">موقع الركوب: حي الياسمين</p>
              </div>
              <div class="passenger-actions">
                <button class="accept-btn action-button">قبول</button>
                <button class="reject-btn action-button">رفض</button>
              </div>
            </div>

            <!-- طلب راكب 2 -->
            <div class="passenger-card booking-request"
              onclick="openPassengerInfo('فاطمة علي','الملز','جامعة نورة','6:00 صباحًا')">
              <div class="passenger-info">
                <p class="passenger-name">فاطمة علي</p>
                <p class="passenger-location">موقع الركوب: حي الملز</p>
              </div>
              <div class="passenger-actions">
                <button class="accept-btn action-button">قبول</button>
                <button class="reject-btn action-button">رفض</button>
              </div>
            </div>
          </div>
          <!-- نهاية طلبات الركاب داخل الكارد -->
        </div>
        <!-- نهاية الكارد الرئيسي للرحلة 1 -->


      </div>
      <!-- نهاية منطقة المحتوى -->

    </div>

    <!-- صفحة التقييمات -->
    <div id="rating-page" class="full-page hidden">
      <div class="container-form">
        <div class="form-box">
          <div class="page-header">
            <button onclick="closePage()" class="back-btn"><i class="fas fa-arrow-right"></i></button>
            <h2>سجل التقييمات</h2>
          </div>

          <div class="rating-history">
            <div class="rating-summary">
              <div class="average-rating">
                <span class="rating-number">0.0</span>
                <div class="stars-display">
                  <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                  <i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <span class="total-reviews">(0 تقييم)</span>
                <p>ستظهر تقييماتك هنا بعد إكمال الرحلات</p>
              </div>
            </div>

            <div class="reviews-list">
              <div class="no-reviews">
                <i class="fas fa-star-o"></i>
                <p>لا توجد تقييمات بعد</p>
                <span>ستظهر تقييمات الركاب هنا بعد إكمال الرحلات</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- صفحة الإعدادات -->
    <div id="settings-page" class="full-page hidden">
      <div class="container-form">
        <div class="form-box">
          <div class="page-header">
            <button onclick="closePage()" class="back-btn"><i class="fas fa-arrow-right"></i></button>
            <h2>الإعدادات</h2>
          </div>

          <div class="settings-form">
            <div class="form-group">
              <label for="name">الاسم</label>
              <input type="text" id="name" placeholder="أدخل اسمك">
            </div>

            <div class="form-group">
              <label for="password">كلمة المرور</label>
              <input type="password" id="password" placeholder="أدخل كلمة المرور الجديدة">
            </div>

            <div class="form-group">
              <label for="emergency-contact">جهة اتصال الطوارئ</label>
              <input type="tel" id="emergency-contact" placeholder="رقم الهاتف للطوارئ">
            </div>

            <button onclick="updateSettings()" class="update-btn">تحديث المعلومات</button>
          </div>
        </div>
      </div>
    </div>

    <!-- البوب أب لعرض تفاصيل الراكب -->
    <div id="popup" class="full-page hidden">
      <div class="form-box">
        <h2 id="popup-name"></h2>
        <p>موقع الانطلاق: <span id="popup-start"></span></p>
        <p>الوجهة: <span id="popup-end"></span></p>
        <p>الوقت: <span id="popup-time"></span></p>

        <button class="update-btn" onclick="closePopup()">إغلاق</button>
      </div>
    </div>

    <!-- الجافاسكربت -->
    <script>
      function toggleProfileDropdown() {
        document.getElementById('profile-dropdown').classList.toggle('hidden');
      }

      function showRatingPage() {
        document.getElementById('profile-dropdown').classList.add('hidden');
        document.getElementById('rating-page').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }

      function showSettingsPage() {
        document.getElementById('profile-dropdown').classList.add('hidden');
        document.getElementById('settings-page').classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }

      function closePage() {
        document.querySelectorAll('.full-page').forEach(page => page.classList.add('hidden'));
        document.body.style.overflow = 'auto';
      }

      function updateSettings() {
        const name = document.getElementById('name').value;
        const password = document.getElementById('password').value;
        const contact = document.getElementById('emergency-contact').value;

        if (!name && !password && !contact) {
          alert('يرجى ملء حقل واحد على الأقل');
          return;
        }

        alert('تم تحديث المعلومات بنجاح');
        closePage();
      }

      function logout() {
        document.getElementById('profile-dropdown').classList.add('hidden');
        showLogoutConfirmation();
      }

      function showLogoutConfirmation() {
        const overlay = document.createElement('div');
        overlay.className = 'logout-overlay';
        overlay.innerHTML = `
        <div class="logout-modal">
          <div class="logout-content">
            <i class="fas fa-sign-out-alt logout-icon"></i>
            <h3>تسجيل الخروج</h3>
            <p>هل أنت متأكد من تسجيل الخروج؟</p>
            <div class="logout-buttons">
              <button onclick="confirmLogout()" class="confirm-logout-btn">نعم، تسجيل الخروج</button>
              <button onclick="cancelLogout()" class="cancel-logout-btn">إلغاء</button>
            </div>
          </div>
        </div>`;
        document.body.appendChild(overlay);
      }

      function confirmLogout() {
        document.querySelector('.logout-overlay').remove();
        showLogoutSuccess();
      }

      function cancelLogout() {
        document.querySelector('.logout-overlay').remove();
      }

      function showLogoutSuccess() {
        const overlay = document.createElement('div');
        overlay.className = 'logout-overlay';
        overlay.innerHTML = `
        <div class="logout-modal">
          <div class="logout-content success">
            <i class="fas fa-check-circle success-icon"></i>
            <h3>تم تسجيل الخروج بنجاح</h3>
            <button onclick="closeLogoutSuccess()" class="success-btn">موافق</button>
          </div>
        </div>`;
        document.body.appendChild(overlay);
      }

      function closeLogoutSuccess() {
        document.querySelector('.logout-overlay').remove();
      }

      document.addEventListener('click', function (event) {
        const profileSection = document.querySelector('.profile-section');
        if (!profileSection.contains(event.target)) {
          document.getElementById('profile-dropdown').classList.add('hidden');
        }
      });

      function switchRole() {
        window.location.href = "passengerRides.html";
      }

      function openPassengerInfo(name, start, end, time) {
        document.getElementById("popup-name").textContent = name;
        document.getElementById("popup-start").textContent = start;
        document.getElementById("popup-end").textContent = end;
        document.getElementById("popup-time").textContent = time;

        document.getElementById("popup").classList.remove("hidden");
      }

      function closePopup() {
        document.getElementById("popup").classList.add("hidden");
      }
    </script>

</body>

</html>